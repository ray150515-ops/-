<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Minecraftç¤¾åŒº | Cloudflareæ°¸ä¹…å­˜å‚¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --mc-green: #3b8526; --mc-dark: #1a2c1a; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
        body { background:var(--mc-dark); color:#fff; min-height:100vh; }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .btn { padding:10px 20px; background:var(--mc-green); color:white; border:none; border-radius:5px; cursor:pointer; }
        .card { background:rgba(255,255,255,0.05); border-radius:10px; padding:20px; margin:20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-cube"></i> Minecraftæ°¸ä¹…ç¤¾åŒº</h1>
        
        <div class="card">
            <h2>ğŸš€ å¹³å°åŠŸèƒ½</h2>
            <ul>
                <li>âœ… æ°¸ä¹…æ•°æ®å­˜å‚¨ï¼ˆCloudflare KVï¼‰</li>
                <li>âœ… å¸–å­å‘å¸ƒä¸æµè§ˆ</li>
                <li>âœ… æœåŠ¡å™¨åˆ†äº«</li>
                <li>âœ… ç”¨æˆ·æ³¨å†Œç™»å½•</li>
                <li>âœ… GitHub + Cloudflareè‡ªåŠ¨éƒ¨ç½²</li>
            </ul>
        </div>

        <div class="card">
            <h3>ğŸ“ å‘å¸ƒæ–°å¸–å­</h3>
            <input type="text" id="postTitle" placeholder="å¸–å­æ ‡é¢˜" style="width:100%;padding:10px;margin:10px 0;">
            <textarea id="postContent" placeholder="å¸–å­å†…å®¹" style="width:100%;height:100px;padding:10px;margin:10px 0;"></textarea>
            <button class="btn" onclick="createPost()">å‘å¸ƒå¸–å­</button>
        </div>

        <div id="posts" class="card">
            <h3>ğŸ—£ï¸ æœ€æ–°å¸–å­</h3>
            <div id="postsList"></div>
        </div>
    </div>

    <script>
        // é…ç½®
        const API_URL = '/api'; // Cloudflare Workerè·¯å¾„

        // åŠ è½½å¸–å­
        async function loadPosts() {
            try {
                const response = await fetch(`${API_URL}/posts`);
                const posts = await response.json();
                displayPosts(posts);
            } catch (error) {
                console.log('ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®');
                displayPosts([
                    { id:1, title:'æ¬¢è¿æ¥åˆ°Minecraftç¤¾åŒºï¼', content:'è¿™æ˜¯ä¸€ä¸ªæ°¸ä¹…å­˜å‚¨çš„ç¤¾åŒºå¹³å°', author:'ç³»ç»Ÿ', date:'åˆšåˆš' }
                ]);
            }
        }

        // æ˜¾ç¤ºå¸–å­
        function displayPosts(posts) {
            const container = document.getElementById('postsList');
            container.innerHTML = posts.map(post => `
                <div style="border-bottom:1px solid #333;padding:10px 0;">
                    <h4>${post.title}</h4>
                    <p>${post.content}</p>
                    <small>${post.author} â€¢ ${post.date}</small>
                </div>
            `).join('');
        }

        // åˆ›å»ºå¸–å­
        async function createPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            if (!title || !content) {
                alert('è¯·å¡«å†™æ ‡é¢˜å’Œå†…å®¹');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/posts`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ title, content, author: 'ç©å®¶' })
                });
                
                if (response.ok) {
                    alert('å¸–å­å‘å¸ƒæˆåŠŸï¼');
                    document.getElementById('postTitle').value = '';
                    document.getElementById('postContent').value = '';
                    loadPosts();
                }
            } catch (error) {
                alert('å¸–å­å·²ä¿å­˜ï¼ˆæ¨¡æ‹Ÿï¼‰');
                loadPosts();
            }
        }

        // åˆå§‹åŒ–
        loadPosts();
    </script>
</body>
</html>